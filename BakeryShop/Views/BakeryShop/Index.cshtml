@{
    ViewData["title"] = "index";
}
@section CSS {
    <link rel="stylesheet" href="~/css/index.css" />
}

 @model List<BakeryShop.Services.Product>
<main style="margin-top: 100px">
    <div class="slider container">
        <div id="carouselExampleDark"
             class="carousel slide"
             data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button"
                        data-bs-target="#carouselExampleDark"
                        data-bs-slide-to="0"
                        class="active"
                        aria-current="true"
                        aria-label="Slide 1"></button>
                <button type="button"
                        data-bs-target="#carouselExampleDark"
                        data-bs-slide-to="1"
                        aria-label="Slide 2"></button>
                <button type="button"
                        data-bs-target="#carouselExampleDark"
                        data-bs-slide-to="2"
                        aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="3000">
                    <img src="https://plus.unsplash.com/premium_photo-1675278299389-4165d19f59d2?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                         class="object-cover slider-img d-block w-100"
                         alt="..." />
                </div>
                <div class="carousel-item" data-bs-interval="2000">
                    <img src="https://plus.unsplash.com/premium_photo-1679076060484-1852c96149d2?q=80&w=1771&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                         class="object-cover slider-img d-block w-100"
                         alt="..." />
                </div>
                <div class="carousel-item" data-bs-interval="3000">
                    <img src="https://plus.unsplash.com/premium_photo-1667682939994-4c9e874dc175?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                         class="object-cover slider-img d-block w-100"
                         alt="..." />
                </div>
            </div>
            <button class="carousel-control-prev"
                    type="button"
                    data-bs-target="#carouselExampleDark"
                    data-bs-slide="prev">
                <span class="carousel-control-prev-icon fs-1"
                      aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next"
                    type="button"
                    data-bs-target="#carouselExampleDark"
                    data-bs-slide="next">
                <span class="carousel-control-next-icon"
                      aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <div class="discount">
        <div class="discount-title mb-2">
            <div class="row row-cols-1 row-cols-xxl-2 g-3 mt-5">
                @foreach (var product in Model)
                {
                    <div class="col">
                        <div class="card mb-3">
                            <div class="row g-0">
                                <div class="col-md-4">
                                    <img src="@product.Img" class="img-fluid rounded-start" alt="...">
                                </div>
                                <div class="col-md-8">
                                    <div class="ms-3 card-body mb-3">
                                        <h5 class="card-title fs-4">@product.Name</h5>
                                        <p class="card-text"><small class="text-body-secondary"> @product.Description </small></p>
                                    </div>
                                    <div class=" card-footer text-danger fs-4 ">
                                        <p class="ms-3 mb-3 card-text">@product.Price VNĐ</p>
                                        <a class="ms-3 card-link btn btn-primary" asp-action="ProductDetail" asp-controller="BakeryShop" asp-route-id="@product.ProductId">Mua ngay </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</main>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#searchBox').on('input', function () {
            var query = $(this).val();

            if (query.length > 0) {
                $.ajax({
                    url: 'https://localhost:7056/api/Product/SearchProduct',
                    type: 'GET',
                    data: { input: query },
                    success: function (data) {
                        $('#results').empty(); // Xóa kết quả cũ
                        data.forEach(function (item) {
                            $('#results').append('<li>' + item + '</li>');
                        });
                    },
                    error: function (xhr, status, error) {
                        console.error("Search failed: " + error);
                        $('#results').empty().append('<li>Error loading results</li>');
                    }
                });
            } else {
                $('#results').empty(); // Xóa kết quả khi ô tìm kiếm rỗng
            }
        });
    });
</script>
